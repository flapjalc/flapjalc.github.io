!function(l,e){"function"==typeof define&&define.amd?define(["jquery"],e):e(l.jQuery)}(this,function(g){"use strict";var d={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};d.scrolls.add=function(l){this.remove(l).push(l)};var o={autoScrollSize:!0,autoUpdate:!0,debug:!(d.scrolls.remove=function(l){for(;0<=g.inArray(l,this);)this.splice(g.inArray(l,this),1);return this}),disableBodyScroll:!1,duration:200,ignoreMobile:!1,ignoreOverlay:!1,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null},l=function(l){var e;d.scroll||(d.overlay=!((e=t(!0)).height||e.width),d.scroll=t(),a(),g(window).resize(function(){var l=!1;if(d.scroll&&(d.scroll.height||d.scroll.width)){var e=t();e.height===d.scroll.height&&e.width===d.scroll.width||(d.scroll=e,l=!0)}a(l)})),this.container=l,this.namespace=".scrollbar_"+d.data.index++,this.options=g.extend({},o,window.jQueryScrollbarOptions||{}),this.scrollTo=null,this.scrollx={},this.scrolly={},l.data(d.data.name,this),d.scrolls.add(this)};l.prototype={destroy:function(){if(this.wrapper){this.container.removeData(d.data.name),d.scrolls.remove(this);var l=this.container.scrollLeft(),e=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(l).scrollTop(e),this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace),this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace),this.wrapper.remove(),g(document).add("body").off(this.namespace),g.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(l){var u=this,f=this.container,r=this.containerWrapper||f,v=this.namespace,b=g.extend(this.options,l||{}),m={x:this.scrollx,y:this.scrolly},o=this.wrapper,e={scrollLeft:f.scrollLeft(),scrollTop:f.scrollTop()};if(d.mobile&&b.ignoreMobile||d.overlay&&b.ignoreOverlay||d.macosx&&!d.webkit)return!1;if(o)r.css({height:"auto","margin-bottom":-1*d.scroll.height+"px","margin-right":-1*d.scroll.width+"px","max-height":""});else{if(this.wrapper=o=g("<div>").addClass("scroll-wrapper").addClass(f.attr("class")).css("position","absolute"==f.css("position")?"absolute":"relative").insertBefore(f).append(f),f.is("textarea")&&(this.containerWrapper=r=g("<div>").insertBefore(f).append(f),o.addClass("scroll-textarea")),r.addClass("scroll-content").css({height:"auto","margin-bottom":-1*d.scroll.height+"px","margin-right":-1*d.scroll.width+"px","max-height":""}),f.on("scroll"+v,function(l){g.isFunction(b.onScroll)&&b.onScroll.call(u,{maxScroll:m.y.maxScrollOffset,scroll:f.scrollTop(),size:m.y.size,visible:m.y.visible},{maxScroll:m.x.maxScrollOffset,scroll:f.scrollLeft(),size:m.x.size,visible:m.x.visible}),m.x.isVisible&&m.x.scroll.bar.css("left",f.scrollLeft()*m.x.kx+"px"),m.y.isVisible&&m.y.scroll.bar.css("top",f.scrollTop()*m.y.kx+"px")}),o.on("scroll"+v,function(){o.scrollTop(0).scrollLeft(0)}),b.disableBodyScroll){var s=function(l){x(l)?m.y.isVisible&&m.y.mousewheel(l):m.x.isVisible&&m.x.mousewheel(l)};o.on("MozMousePixelScroll"+v,s),o.on("mousewheel"+v,s),d.mobile&&o.on("touchstart"+v,function(l){var e=l.originalEvent.touches&&l.originalEvent.touches[0]||l,o=e.pageX,s=e.pageY,r=f.scrollLeft(),t=f.scrollTop();g(document).on("touchmove"+v,function(l){var e=l.originalEvent.targetTouches&&l.originalEvent.targetTouches[0]||l;f.scrollLeft(r+o-e.pageX),f.scrollTop(t+s-e.pageY),l.preventDefault()}),g(document).on("touchend"+v,function(){g(document).off(v)})})}g.isFunction(b.onInit)&&b.onInit.apply(this,[f])}g.each(m,function(t,i){var n=null,c=1,a="x"===t?"scrollLeft":"scrollTop",d=b.scrollStep,h=function(){var l=f[a]();f[a](l+d),1==c&&p<=l+d&&(l=f[a]()),-1==c&&l+d<=p&&(l=f[a]()),f[a]()==l&&n&&n()},p=0;i.scroll||(i.scroll=u._getScroll(b["scroll"+t]).addClass("scroll-"+t),b.showArrows&&i.scroll.addClass("scroll-element_arrows_visible"),i.mousewheel=function(l){if(!i.isVisible||"x"===t&&x(l))return!0;if("y"===t&&!x(l))return m.x.mousewheel(l),!0;var e=-1*l.originalEvent.wheelDelta||l.originalEvent.detail,o=i.size-i.visible-i.offset;return(0<e&&p<o||e<0&&0<p)&&((p+=e)<0&&(p=0),o<p&&(p=o),u.scrollTo=u.scrollTo||{},u.scrollTo[a]=p,setTimeout(function(){u.scrollTo&&(f.stop().animate(u.scrollTo,240,"linear",function(){p=f[a]()}),u.scrollTo=null)},1)),l.preventDefault(),!1},i.scroll.on("MozMousePixelScroll"+v,i.mousewheel).on("mousewheel"+v,i.mousewheel).on("mouseenter"+v,function(){p=f[a]()}),i.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+v,function(l,e){if(1!=l.which)return!0;c=1;var o={eventOffset:l["x"===t?"pageX":"pageY"],maxScrollValue:i.size-i.visible-i.offset,scrollbarOffset:i.scroll.bar.offset()["x"===t?"left":"top"],scrollbarSize:i.scroll.bar["x"===t?"outerWidth":"outerHeight"]()},s=0,r=0;return p=g(this).hasClass("scroll-arrow")?(c=g(this).hasClass("scroll-arrow_more")?1:-1,d=e?e*c:b.scrollStep*c,0<c?o.maxScrollValue:0):(c=o.scrollbarOffset+o.scrollbarSize<o.eventOffset?1:o.eventOffset<o.scrollbarOffset?-1:0,d=Math.round(.75*i.visible)*c,p=o.eventOffset-o.scrollbarOffset-(b.stepScrolling?1==c?o.scrollbarSize:0:Math.round(o.scrollbarSize/2)),f[a]()+p/i.kx),u.scrollTo=u.scrollTo||{},u.scrollTo[a]=b.stepScrolling?f[a]()+d:p,b.stepScrolling&&(n=function(){p=f[a](),clearInterval(r),clearTimeout(s),r=s=0},s=setTimeout(function(){r=setInterval(h,40)},b.duration+100)),setTimeout(function(){u.scrollTo&&(f.animate(u.scrollTo,b.duration),u.scrollTo=null)},1),u._handleMouseDown(n,l)}),i.scroll.bar.on("mousedown"+v,function(l){if(1!=l.which)return!0;var o=l["x"===t?"pageX":"pageY"],s=f[a]();return i.scroll.addClass("scroll-draggable"),g(document).on("mousemove"+v,function(l){var e=parseInt((l["x"===t?"pageX":"pageY"]-o)/i.kx,10);f[a](s+e)}),u._handleMouseDown(function(){i.scroll.removeClass("scroll-draggable"),p=f[a]()},l)}))}),g.each(m,function(l,e){var o="scroll-scroll"+l+"_visible",s="x"==l?m.y:m.x;e.scroll.removeClass(o),s.scroll.removeClass(o),r.removeClass(o)}),g.each(m,function(l,e){g.extend(e,"x"==l?{offset:parseInt(f.css("left"),10)||0,size:f.prop("scrollWidth"),visible:o.width()}:{offset:parseInt(f.css("top"),10)||0,size:f.prop("scrollHeight"),visible:o.height()})}),this._updateScroll("x",this.scrollx),this._updateScroll("y",this.scrolly),g.isFunction(b.onUpdate)&&b.onUpdate.apply(this,[f]),g.each(m,function(l,e){var o="x"===l?"left":"top",s="x"===l?"outerWidth":"outerHeight",r="x"===l?"width":"height",t=parseInt(f.css(o),10)||0,i=e.size,n=e.visible+t,c=e.scroll.size[s]()+(parseInt(e.scroll.size.css(o),10)||0);b.autoScrollSize&&(e.scrollbarSize=parseInt(c*n/i,10),e.scroll.bar.css(r,e.scrollbarSize+"px")),e.scrollbarSize=e.scroll.bar[s](),e.kx=(c-e.scrollbarSize)/(i-n)||1,e.maxScrollOffset=i-n}),f.scrollLeft(e.scrollLeft).scrollTop(e.scrollTop).trigger("scroll")},_getScroll:function(l){var e={advanced:['<div class="scroll-element">','<div class="scroll-element_corner"></div>','<div class="scroll-arrow scroll-arrow_less"></div>','<div class="scroll-arrow scroll-arrow_more"></div>','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_inner-wrapper">','<div class="scroll-element_inner scroll-element_track">','<div class="scroll-element_inner-bottom"></div>',"</div>","</div>",'<div class="scroll-bar">','<div class="scroll-bar_body">','<div class="scroll-bar_body-inner"></div>',"</div>",'<div class="scroll-bar_bottom"></div>','<div class="scroll-bar_center"></div>',"</div>","</div>","</div>"].join(""),simple:['<div class="scroll-element">','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_track"></div>','<div class="scroll-bar"></div>',"</div>","</div>"].join("")};return e[l]&&(l=e[l]),l||(l=e.simple),l="string"==typeof l?g(l).appendTo(this.wrapper):g(l),g.extend(l,{bar:l.find(".scroll-bar"),size:l.find(".scroll-element_size"),track:l.find(".scroll-element_track")}),l},_handleMouseDown:function(l,e){var o=this.namespace;return g(document).on("blur"+o,function(){g(document).add("body").off(o),l&&l()}),g(document).on("dragstart"+o,function(l){return l.preventDefault(),!1}),g(document).on("mouseup"+o,function(){g(document).add("body").off(o),l&&l()}),g("body").on("selectstart"+o,function(l){return l.preventDefault(),!1}),e&&e.preventDefault(),!1},_updateScroll:function(l,e){var o=this.container,s=this.containerWrapper||o,r="scroll-scroll"+l+"_visible",t="x"===l?this.scrolly:this.scrollx,i=parseInt(this.container.css("x"===l?"left":"top"),10)||0,n=this.wrapper,c=e.size,a=e.visible+i;e.isVisible=1<c-a,e.isVisible?(e.scroll.addClass(r),t.scroll.addClass(r),s.addClass(r)):(e.scroll.removeClass(r),t.scroll.removeClass(r),s.removeClass(r)),"y"===l&&(o.is("textarea")||c<a?s.css({height:a+d.scroll.height+"px","max-height":"none"}):s.css({"max-height":a+d.scroll.height+"px"})),e.size==o.prop("scrollWidth")&&t.size==o.prop("scrollHeight")&&e.visible==n.width()&&t.visible==n.height()&&e.offset==(parseInt(o.css("left"),10)||0)&&t.offset==(parseInt(o.css("top"),10)||0)||(g.extend(this.scrollx,{offset:parseInt(o.css("left"),10)||0,size:o.prop("scrollWidth"),visible:n.width()}),g.extend(this.scrolly,{offset:parseInt(o.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:n.height()}),this._updateScroll("x"===l?"y":"x",t))}};var r=l;g.fn.scrollbar=function(o,s){return"string"!=typeof o&&(s=o,o="init"),void 0===s&&(s=[]),g.isArray(s)||(s=[s]),this.not("body, .scroll-wrapper").each(function(){var l=g(this),e=l.data(d.data.name);(e||"init"===o)&&(e||(e=new r(l)),e[o]&&e[o].apply(e,s))}),this},g.fn.scrollbar.options=o;var c,s,a=(c=0,function(l){var e,o,s,r,t,i,n;for(e=0;e<d.scrolls.length;e++)o=(r=d.scrolls[e]).container,s=r.options,t=r.wrapper,i=r.scrollx,n=r.scrolly,(l||s.autoUpdate&&t&&t.is(":visible")&&(o.prop("scrollWidth")!=i.size||o.prop("scrollHeight")!=n.size||t.width()!=i.visible||t.height()!=n.visible))&&(r.init(),s.debug&&window.console&&console.log({scrollHeight:o.prop("scrollHeight")+":"+r.scrolly.size,scrollWidth:o.prop("scrollWidth")+":"+r.scrollx.size,visibleHeight:t.height()+":"+r.scrolly.visible,visibleWidth:t.width()+":"+r.scrollx.visible},!0));clearTimeout(c),c=setTimeout(a,300)});function t(l){if(d.webkit&&!l)return{height:0,width:0};if(!d.data.outer){var e={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};d.data.inner=g("<div>").css(g.extend({},e)),d.data.outer=g("<div>").css(g.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},e)).append(d.data.inner).appendTo("body")}return d.data.outer.scrollLeft(1e3).scrollTop(1e3),{height:Math.ceil(d.data.outer.offset().top-d.data.inner.offset().top||0),width:Math.ceil(d.data.outer.offset().left-d.data.inner.offset().left||0)}}function x(l){var e=l.originalEvent;return(!e.axis||e.axis!==e.HORIZONTAL_AXIS)&&!e.wheelDeltaX}window.angular&&(s=window.angular).module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var e=o;return{setOptions:function(l){s.extend(e,l)},$get:function(){return{options:s.copy(e)}}}}).directive("jqueryScrollbar",function(r,t){return{restrict:"AC",link:function(l,e,o){var s=t(o.jqueryScrollbar)(l);e.scrollbar(s||r.options).on("$destroy",function(){e.scrollbar("destroy")})}}})});